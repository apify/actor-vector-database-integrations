{
  "title": "Chroma-integration",
  "type": "object",
  "schemaVersion": 1,
  "properties": {
    "chromaCollectionName": {
      "title": "Chroma collection name",
      "description": "Name of the chroma collection where the data will be stored",
      "type": "string",
      "editor": "textfield",
      "default": "chroma"
    },
    "chromaClientHost": {
      "title": "Chroma host",
      "description": "Host argument for Chroma HTTP Client",
      "type": "string",
      "editor": "textfield"
    },
    "chromaClientPort": {
      "title": "Chroma port",
      "description": "Port argument for Chroma HTTP Client",
      "type": "integer",
      "editor": "number",
      "default": 8000
    },
    "chromaClientSsl": {
      "title": "Chroma SSL enabled",
      "description": "Enable/Disable SSL",
      "type": "boolean",
      "default": false
    },
    "chromaServerAuthCredentials": {
      "title": "Chroma server Auth Static API token credentials",
      "description": "Chroma server Auth Static API token.",
      "type": "string",
      "editor": "textfield",
      "isSecret": true
    },
    "chromaClientAuthProvider": {
      "title": "Chroma client auth provider",
      "description": "Chroma client auth provider",
      "type": "string",
      "editor": "textfield",
      "prefill": "chromadb.auth.token_authn.TokenAuthClientProvider",
      "default": "chromadb.auth.token_authn.TokenAuthClientProvider"
    },
    "embeddingsProvider": {
      "title": "Embeddings provider (as defined in the langchain API)",
      "description": "Choose the embeddings provider to use for generating embeddings",
      "type": "string",
      "editor": "select",
      "enum": [
        "OpenAIEmbeddings",
        "CohereEmbeddings"
      ],
      "default": "OpenAIEmbeddings"
    },
    "embeddingsConfig": {
      "title": "Embeddings provider configuration",
      "description": "Specific configuration for the embeddings. For example, for OpenAI, you can the model name as {\"model\": \"text-embedding-ada-002\"})",
      "type": "object",
      "editor": "json"
    },
    "embeddingsApiKey": {
      "title": "Embeddings API Key (whenever applicable, depends on provider)",
      "description": "Enter the API key for the selected embeddings provider, if required. For example, for OpenAI, use the OPENAI_API_KEY, and for Cohere, use the COHERE_API_KEY.",
      "type": "string",
      "editor": "textfield",
      "isSecret": true
    },
    "datasetFields": {
      "title": "A list of dataset fields which should be selected from the dataset results",
      "type": "array",
      "description": "This array specifies the dataset fields to be selected and stored in the vector store. Only the fields listed here will be included in the vector store. For instance, when using the Website Content Crawler, you might choose to include fields such as `text`, `url`, and `metadata.title` in the vector store.",
      "default": [
        "url",
        "text"
      ],
      "prefill": [
        "url",
        "text",
        "metadata.title"
      ],
      "editor": "stringList"
    },
    "metadataDatasetFields": {
      "title": "A list of dataset fields to be selected from the dataset and stored as metadata in the database",
      "type": "object",
      "description": "A list of dataset fields which should be selected from the dataset and stored as metadata in the vector stores. \n\n For example, when using the Website Content Crawler, you might want to store `url` in metadata. In this case, use `metadataDatasetFields parameter as follows {\"page_url\": \"url\"}`",
      "editor": "json"
    },
    "metadataObject": {
      "title": "Custom object to be stored as metadata in the vector store database",
      "type": "object",
      "description": "This object allows you to store custom metadata for every item in the vector store. For example, if you want to store the `domain` as metadata, use the `metadataObject` like this: {\"domain\": \"apify.com\"}.",
      "editor": "json"
    },
    "performChunking": {
      "title": "Perform chunking",
      "description": "If set to true, the resulting text will be chunked according to the settings below",
      "default": false,
      "type": "boolean"
    },
    "chunkSize": {
      "title": "Chunk size",
      "type": "integer",
      "description": "The maximum character length of each text chunk",
      "default": 1000,
      "minimum": 1
    },
    "chunkOverlap": {
      "title": "Chunk overlap",
      "type": "integer",
      "description": "The character overlap between text chunks that are next to each other",
      "default": 0,
      "minimum": 0
    },
    "datasetKeysToItemId": {
      "title": "Keys for dataset item identification",
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "This array contains keys that are used to uniquely identify dataset items, which helps to handle content changes across different runs. For instance, in a web content crawling scenario, the `url` field could serve as a unique identifier for each item.",
      "editor": "stringList",
      "prefill": [
        "url"
      ],
      "default": [
        "url"
      ]
    },
    "enableDeltaUpdates": {
      "title": "Enable incremental updates for objects based on deltas",
      "type": "boolean",
      "description": "When set to true, this setting enables incremental updates for objects in the database by comparing the changes (deltas) between the crawled dataset items and the existing objects, uniquely identified by the `datasetKeysToItemId` field.\n\n The integration will only add new objects and update those that have changed, reducing unnecessary updates. The `datasetFields`, `metadataDatasetFields`, and `metadataObject` fields are used to determine the changes.",
      "default": true
    },
    "expiredObjectDeletionPeriod": {
      "title": "Delete expired objects from the database after a specified number of days",
      "type": "number",
      "description": "This setting allows the integration to manage the deletion of objects from the database that have not been crawled for a specified period. It is typically used in subsequent runs after the initial crawl.\n\nWhen the value is greater than 0, the integration checks if objects have been seen within the last X days (determined by the expiration period). If the objects are expired, they are deleted from the database. The specific value for `deletedExpiredObjectsDays` depends on your use case and how frequently you crawl data.\n\nFor example, if you crawl data daily, you can set `deletedExpiredObjectsDays` to 7 days. If you crawl data weekly, you can set `deletedExpiredObjectsDays` to 30 days.",
      "default": 30,
      "prefill": 30,
      "minimum": 0
    },
    "datasetId": {
      "title": "Dataset ID",
      "type": "string",
      "description": "Dataset ID (when running standalone without integration)",
      "editor": "textfield"
    }
  },
  "required": [
    "chromaClientHost",
    "embeddingsProvider",
    "datasetFields"
  ]
}
